(this["webpackJsonpspeedtest-for-digitalocean"]=this["webpackJsonpspeedtest-for-digitalocean"]||[]).push([[0],{16:function(e){e.exports=JSON.parse('{"name":"speedtest-for-digitalocean","version":"1.2.2","private":true,"description":"Run speed tests for all DigitalOcean datacenters faster than ever.","homepage":"http://speedtest-do.marcomontalbano.com/","author":{"name":"Marco Montalbano","email":"me@marcomontalbano.com","url":"https://marcomontalbano.com"},"license":"MIT","repository":{"type":"git","url":"https://github.com/marcomontalbano/speedtest-for-digitalocean"},"keywords":["mmontalbano","marcomontalbano","fastest","speedtest","speed test","digitalocean","datacenter"],"engines":{"node":"8.x || 10.x || 11.x || 12.x"},"dependencies":{"lodash":"^4.17.19"},"devDependencies":{"flux":"^3.1.3","gh-pages":"^3.1.0","npm-run-all":"^4.1.5","prop-types":"^15.7.2","react":"^16.13.1","react-dom":"^16.13.1","react-scripts":"^3.4.1","uikit":"^3.5.5"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test --env=jsdom","gh-pages":"node ./scripts/gh-pages.js","deploy":"npm-run-all build gh-pages"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},18:function(e,t,n){e.exports=n(44)},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t){document.querySelectorAll(".js--link").forEach((function(e){e.addEventListener("click",(function(){window.ga("send",{hitType:"event",eventCategory:"Link",eventAction:"click",eventLabel:this.getAttribute("data-label")})}))}))},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(9),c=n.n(s),i=n(2),o=n(3),u=n(6),l=n(5),d=n(17),h=n(1),p=n.n(h),m=n(14),f=new(n(15).Dispatcher),k="CHANGED_TEST",v="CHANGED_RESULTS",g="STARTED",y="STOPPED",b=new(function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.call(this,f)}return Object(o.a)(n,[{key:"getInitialState",value:function(){return{results:[],currentDatacenter:{},isRunning:!1}}},{key:"reduce",value:function(e,t){var n=JSON.parse(JSON.stringify(e));switch(t.type){case g:return n.isRunning=!0,n;case y:return n.isRunning=!1,n;case k:return n.currentDatacenter=t.value,n;case v:return n.results=t.value,n;default:return e}}}]),n}(m.ReduceStore)),_=(n(37),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onSpeedtestStoreHandler=function(){a.setState({speedtestStore:b.getState()})},a.startStopHandler=function(){a.state.speedtestStore.isRunning?a.props.speedtest.stop():a.props.speedtest.start({checkFastests:a.state.checkFastests,filterDatacenters:a.state.filterDatacenters,fastestsQnt:a.state.fastestsQnt})},a.filterDatacentersHandler=function(e){var t=e.target.value;a.setState((function(e){return{filterDatacenters:p.a.xor(e.filterDatacenters,[t])}}))},a.filterContinentHandler=function(e){var t=e.target.value,n=a.props.speedtest.datacenters.filter((function(e){return e.continent===t})).map((function(e){return e.name}));e.target.checked?a.setState((function(e){return{filterDatacenters:p.a.union(e.filterDatacenters,n)}})):a.setState((function(e){return{filterDatacenters:p.a.difference(e.filterDatacenters,n)}}))},a.filterHandler=function(){a.setState((function(e){return{isFilterOpen:!e.isFilterOpen}}))},a.checkFastestsHandler=function(e){a.setState({checkFastests:e.target.checked})},a.isDatacenterSelected=function(e){return a.state.filterDatacenters.indexOf(e.name)>=0},a.state={speedtestStore:b.getState(),checkFastests:!0,isFilterOpen:!1,fastestsQnt:4,filterDatacenters:a.props.speedtest.datacenters.map((function(e){return e.name}))},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.listener=b.addListener(this.onSpeedtestStoreHandler)}},{key:"componentWillUnmount",value:function(){this.listener.remove()}},{key:"renderDatacenters",value:function(e){var t=this;return e.length>0?p.a.map(e,(function(e,n){return r.a.createElement("div",{key:n,className:"Datacenter uk-width-1-2"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",className:"uk-checkbox",value:e.name,disabled:t.state.speedtestStore.isRunning,onChange:t.filterDatacentersHandler,checked:t.isDatacenterSelected(e)})," ",e.name))})):null}},{key:"renderContinents",value:function(e){var t=this,n=p.a.groupBy(e,"continent");return Object.entries(n).map((function(e){var n=Object(d.a)(e,2),a=n[0],s=n[1];return r.a.createElement("div",{key:a,className:"Continent uk-width-1-2 uk-width-1-3@m"},r.a.createElement("label",{className:"uk-form-label"},r.a.createElement("input",{type:"checkbox",className:"uk-checkbox",value:a,disabled:t.state.speedtestStore.isRunning,onChange:t.filterContinentHandler,checked:s.every(t.isDatacenterSelected)})," ",a),r.a.createElement("div",{className:"uk-form-controls uk-grid"},t.renderDatacenters(s)))}))}},{key:"render",value:function(){return console.log("here"),r.a.createElement("div",{className:"Filter uk-container"},r.a.createElement("div",{className:"uk-grid"},r.a.createElement("div",{className:"check-only-fastests uk-width-1-1 uk-width-3-5@s uk-text-right"},r.a.createElement("form",null,r.a.createElement("fieldset",{className:"uk-fieldset"},r.a.createElement("label",null,r.a.createElement("input",{className:"uk-checkbox",type:"checkbox",onClick:this.checkFastestsHandler,disabled:this.state.speedtestStore.isRunning,defaultChecked:this.state.checkFastests})," Check only the fastest ",this.state.fastestsQnt)))),r.a.createElement("div",{className:"uk-width-1-1 uk-width-1-5@s uk-text-center"},r.a.createElement("button",{disabled:0===this.state.filterDatacenters.length,className:"uk-button uk-button-primary uk-width-1-1",onClick:this.startStopHandler},this.state.speedtestStore.isRunning?"stop":"start")),r.a.createElement("div",{className:"uk-width-1-1 uk-width-1-5@s uk-text-center"},r.a.createElement("button",{className:"uk-button uk-button-default uk-width-1-1",onClick:this.filterHandler},"filter"))),this.state.isFilterOpen&&r.a.createElement("div",{className:"uk-grid"},r.a.createElement("div",{className:"uk-width-1-1"},r.a.createElement("form",{className:"uk-form-stacked"},r.a.createElement("div",{className:"uk-grid-small uk-child-width-auto uk-grid"},this.renderContinents(this.props.speedtest.datacenters))))))}}]),n}(a.Component)),w=(n(38),function(){return r.a.createElement("div",{className:"sk-three-bounce"},r.a.createElement("div",{className:"sk-child sk-bounce1"}),r.a.createElement("div",{className:"sk-child sk-bounce2"}),r.a.createElement("div",{className:"sk-child sk-bounce2"}))}),E=(n(39),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onSpeedtestStoreHandler=function(){a.setState({speedtestStore:b.getState()})},a.state={speedtestStore:b.getState()},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.listener=b.addListener(this.onSpeedtestStoreHandler)}},{key:"componentWillUnmount",value:function(){this.listener.remove()}},{key:"renderRow",value:function(e,t){return r.a.createElement("tr",{key:e.name,className:t.isRunning&&t.currentDatacenter.name===e.name?"uk-active":null},r.a.createElement("td",null,t.isRunning&&t.currentDatacenter.name===e.name?r.a.createElement(w,null):null),r.a.createElement("td",null,r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:e.datacenter?e.datacenter.url:"#"},e.name)),r.a.createElement("td",null,e.datacenter?e.datacenter.region:""),r.a.createElement("td",null,e.ping?"".concat(e.ping," ms"):""),r.a.createElement("td",null,e.download?"".concat((e.download/1e3).toFixed(2)," Mb/s"):""),r.a.createElement("td",null,e.upload?"".concat((e.upload/1e3).toFixed(2)," Mb/s"):""))}},{key:"renderResults",value:function(e){var t=this;return r.a.createElement("table",{className:"uk-table uk-table-divider uk-text-align-center uk-table-responsive"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"name"),r.a.createElement("th",null,"region"),r.a.createElement("th",null,"ping"),r.a.createElement("th",null,"download"),r.a.createElement("th",null,"upload"))),r.a.createElement("tbody",null,p.a.map(e.results,(function(n,a){return t.renderRow(n,e)}))))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Results uk-container"},r.a.createElement("form",null,r.a.createElement("fieldset",{className:"uk-fieldset"},r.a.createElement("div",{className:"uk-margin uk-grid-small uk-child-width-auto uk-grid"},this.renderResults(this.state.speedtestStore)))))}}]),n}(a.Component)),S=n(8),O=n(4),N=[{name:"NYC1",continent:"North America",region:"New York",url:"http://speedtest-nyc1.digitalocean.com"},{name:"NYC2",continent:"North America",region:"New York",url:"http://speedtest-nyc2.digitalocean.com"},{name:"NYC3",continent:"North America",region:"New York",url:"http://speedtest-nyc3.digitalocean.com"},{name:"AMS2",continent:"Europe",region:"Amsterdam",url:"http://speedtest-ams2.digitalocean.com"},{name:"AMS3",continent:"Europe",region:"Amsterdam",url:"http://speedtest-ams3.digitalocean.com"},{name:"SFO1",continent:"North America",region:"San Francisco",url:"http://speedtest-sfo1.digitalocean.com"},{name:"SFO2",continent:"North America",region:"San Francisco",url:"http://speedtest-sfo2.digitalocean.com"},{name:"SGP1",continent:"Asia",region:"Singapore",url:"http://speedtest-sgp1.digitalocean.com"},{name:"LON1",continent:"Europe",region:"London",url:"http://speedtest-lon1.digitalocean.com"},{name:"FRA1",continent:"Europe",region:"Frankfurt",url:"http://speedtest-fra1.digitalocean.com"},{name:"TOR1",continent:"North America",region:"Toronto",url:"http://speedtest-tor1.digitalocean.com"},{name:"BLR1",continent:"Asia",region:"Bangalore",url:"http://speedtest-blr1.digitalocean.com"}],D=Symbol(),T=function(){function e(){Object(i.a)(this,e),this.clean()}return Object(o.a)(e,[{key:"indexOf",value:function(e){return parseInt(p.a.findKey(this[D],{name:e}),10)}},{key:"update",value:function(e,t,n){var a=this.indexOf(e);return isNaN(a)&&this[D].push({name:e}),a=this.indexOf(e),this[D][a][t]=n,n}},{key:"get",value:function(e,t){var n=p.a.findKey(this[D],{name:e});return void 0===t?this[D][n]:this[D][n][t]}},{key:"orderBy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this[D]=p.a.orderBy(this[D],p.a.isArray(e)?e:[e],p.a.isArray(t)?t:[t])}},{key:"clean",value:function(){this[D]=[]}},{key:"results",get:function(){return this[D]}}]),e}(),j=function(){f.dispatch({type:g})},F=function(){f.dispatch({type:y})},x=function(e){f.dispatch({type:v,value:e})},R=function(e){f.dispatch({type:k,value:e})},A=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"_gaEvent",value:function(e,t){window.ga("send",{hitType:"event",eventCategory:"SpeedTest",eventAction:e,eventLabel:this.currentTest.name,eventValue:Math.round(t)})}},{key:"currentTest_update",value:function(e,t){Object(S.a)(Object(O.a)(n.prototype),"currentTest_update",this).call(this,e,t),x(this.resultStorage.results)}},{key:"__speedcheckerPingTestFinished",value:function(e){this._gaEvent("ping",e),Object(S.a)(Object(O.a)(n.prototype),"__speedcheckerPingTestFinished",this).call(this,e)}},{key:"__speedcheckerDownloadFinished",value:function(e){this._gaEvent("download",e),Object(S.a)(Object(O.a)(n.prototype),"__speedcheckerDownloadFinished",this).call(this,e)}},{key:"__speedcheckerUploadFinished",value:function(e){this._gaEvent("upload",e),Object(S.a)(Object(O.a)(n.prototype),"__speedcheckerUploadFinished",this).call(this,e)}},{key:"_run",value:function(){window.onbeforeunload=function(){return!0},Object(S.a)(Object(O.a)(n.prototype),"_run",this).call(this),j(),R(this.currentTest)}},{key:"stop",value:function(){window.onbeforeunload=null,Object(S.a)(Object(O.a)(n.prototype),"stop",this).call(this),F()}}]),n}(function(){function e(){Object(i.a)(this,e),window.addEventListener("message",this.__onMessageHandler.bind(this),!1),this.logs=[],this.options={},this.currentIndex=0,this.resultStorage=new T,this.currentDatacenterSet=this.datacenters}return Object(o.a)(e,[{key:"currentTest_get",value:function(e){return this.resultStorage.get(this.currentTest.name,e)}},{key:"currentTest_update",value:function(e,t){this.resultStorage.update(this.currentTest.name,e,t),this.resultStorage.orderBy("ping")}},{key:"_runNext",value:function(){if(this.currentIndex<this.currentDatacenterSet.length-1)this.currentIndex+=1,this._run();else if(!0===this.options.checkFastests){this.currentIndex=0,this.options.checkFastests=!1;var e=this.options;this.currentDatacenterSet=this.resultStorage.results.filter((function(t,n){return n<e.fastestsQnt})),this.currentDatacenterSet=this.currentDatacenterSet.map((function(e){return e.datacenter})),this._run()}else this._completed()}},{key:"_run",value:function(){this.currentTest_update("datacenter",this.currentTest),window.sc_skin="",window.sc_autostart="true",window.sc_bgc="0xFFFFFF",window.sc_bc="0x333333",window.sc_hc="0x333333",window.sc_cc="0x0080ff",window.sc_w=400,window.sc_h=250,window.version=3,window.sc_userid=52722e3,window.sc_forceSecureWebsockets=0,window.serverUrl=this.currentTest.url,window.serverTitle=this.currentTest.name,window.license="",window.server="php",window.latencyMeasurementType="icmp";var e=document.createElement("script");e.setAttribute("src",("https:"===document.location.protocol?"https":"http")+"://www.speedcheckercdn.com/speedchecker.js"),document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_completed",value:function(){this.stop(),this.cleanResults()}},{key:"start",value:function(e){var t=this;if(this.stop(),this.options=p.a.assign({filterDatacenters:this.currentDatacenterSet.map((function(e){return e.name})),checkFastests:!1,fastestsQnt:4},e||{}),this.currentDatacenterSet=p.a.filter(this.currentDatacenterSet,(function(e){return t.options.filterDatacenters.indexOf(e.name)>=0})),!document.getElementById("speedcheckerdiv")){var n=document.createElement("div");n.setAttribute("id","speedcheckerdiv"),document.getElementsByTagName("body")[0].appendChild(n)}this._run()}},{key:"pause",value:function(){document.getElementById("speedcheckerdiv")&&document.getElementById("speedcheckerdiv").remove()}},{key:"cleanResults",value:function(){this.resultStorage.clean()}},{key:"stop",value:function(){this.pause(),this.cleanResults(),this.currentIndex=0,this.currentDatacenterSet=this.datacenters}},{key:"__onMessageHandler",value:function(e){var t="__".concat(e.data.type),n=e.data.value;this.logs.push(e),this[t]&&this[t](n)}},{key:"__speedcheckerDebug",value:function(e){}},{key:"__speedcheckerDownloadPrepared",value:function(e){}},{key:"__speedcheckerDownloadStarted",value:function(e){}},{key:"__speedcheckerLinkValid",value:function(e){}},{key:"__speedcheckerPingFinished",value:function(e){}},{key:"__speedcheckerPingStarted",value:function(e){}},{key:"__speedcheckerReady",value:function(e){}},{key:"__speedcheckerStartRequired",value:function(e){}},{key:"__speedcheckerStarted",value:function(e){}},{key:"__speedcheckerUploadPrepared",value:function(e){}},{key:"__speedcheckerUploadStarted",value:function(e){}},{key:"__speedcheckerError",value:function(e){this.currentTest_update("retry",(this.currentTest_get("retry")?this.currentTest_get("retry"):0)+1),this.currentTest_update("error",e),this._run()}},{key:"__speedcheckerPingTestFinished",value:function(e){this.currentTest_update("ping",e),!0===this.options.checkFastests&&this._runNext()}},{key:"__speedcheckerDownloadProgress",value:function(e){this.currentTest_update("download",e[0])}},{key:"__speedcheckerDownloadFinished",value:function(e){this.currentTest_update("download",e)}},{key:"__speedcheckerUploadProgress",value:function(e){this.currentTest_update("upload",e[0])}},{key:"__speedcheckerUploadFinished",value:function(e){this.currentTest_update("upload",e)}},{key:"__speedcheckerTakenTestSaved",value:function(e){this._runNext()}},{key:"datacenters",get:function(){return N}},{key:"currentTest",get:function(){return this.currentDatacenterSet[this.currentIndex]}}]),e}()),C=(n(40),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).speedtest=new A,a}return Object(o.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(_,{speedtest:this.speedtest}),r.a.createElement(E,{speedtest:this.speedtest}))}}]),n}(a.Component)),H=n(16);n(41),n(42),n(43);c.a.render(r.a.createElement(C,null),document.getElementById("root")),c.a.render(r.a.createElement("div",null,"v ",H.version),document.getElementById("version"))}},[[18,1,2]]]);
//# sourceMappingURL=main.6f2cadd4.chunk.js.map